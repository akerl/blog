dist: trusty
env:
  global:
  - PATH=$HOME/.local/bin:$PATH
  - BUCKET=akerl-blog
  - secure: XEIe5AVvcICcwV6b/UestkC5H1is1ngWVur2Qhnv/aFXoUlmOEy4AgYy6jHDBQGuLKde2+18ydcFxnD4dOJEQO4iwM6mtij+CAgS8p+QaOqph5PoB0pH7qaL1eCIz3NEB1qFsp0/XE/3szhhfmdka49XKKOC2h1MoPYRKsa1PuzXF7jsxEAZjM7bkAqH55cogsRw+alIDsb/RFkcfr2wpmS05OAUx7c2Ypc3HpD2Pa7Kh28dRS95gW3DDXdOeUrvAlJk2/GelodydUJg+RJ7E/hmCbn9g5AqeqA7gN6nayi1IHojX2/rJeeaOzoeDadOYsktQmrSkLNKf76QcJZAOZ3fPe3X413ML6mX8ZNMex20/2H6AhuFAhBUXALgwsheuGvDuUkGA3hTLtBdxSMmQKzMTV1qmkjibwmgMEHWKXNHp9+yJP0dFUFjBN3rxUMugjF3Zoto6CBdFfX8VyrS6lrS9h/WYIUXDxk/F7GHPKFfrn+iNBGykbBT/ZW+NbSL/i4iyER4XEOTGsaYW4Vv0GGEnQXxPkaJXY6zJe4+itSz+6lEXR9y/YoxaSAX3hmxZauwgR8eo8K6mc6hbm7cCBlG3ZfL9Aa8pUlYi5L6MMLJfVaU/mtjrcL8wxQHytvMU/gtfettKiBQl+8hthnFbeSBwidI2XbZqJdi9LEL0C0=
  - secure: q5Gk7c6DBWz9cxS8rnJnQQy6df83O/h73foT3DcLqGqOukBTnyo7b0eDIwsPJVveS/vf+2kDNJ4eeuUrMAdYvjHH/r0SdqdBnXXOq3Gws1kCtZqaoSvCpUphreucNkJdLHJAwDGbSWqLDJNOFWWUglBDmycaLCSwrn4SOnC/5oVx+I3uB5D8jYCwaxtzsytWbWAaj6l30JtTAGh9Zzip8KdaOT0XeOOvD5fmBE7OanDgeoqv5T1W5pEJw4+z91nzRaG0up0r9UcCI7kFWmAv0V32E29SiMX+6MoJ9Lt8ErTlvm6UsYrx1ZPNhD5g50zV8qhpnSNkc2O7D1pT55vPBB/g8wYaPVO+HCWxDUXfwrdQmakgqkIsaGwXMtt/ONcMIzF8r/Ow+WF9PiwbzK3ZXF0LO9mVOwRAG9TeQRAw83fIe55g/80ANyBX15qrGTN1IbwvA6Ye/vsLentsw8PH47cTrdcRLhPTJF2cM2KmQPayxtM/MJRsq488sYbxoLaB1vcEcuIRh2bwG65p0nd6uBtafqFObPF9X9MwJCedpMaDpsx3YIvucqNU6Zy57YqqndKmKgBJvmkBb7rbGO7mDkhGXuxLhLX9FM+8iQZxUU7Yq4VuWSmoqUynGpjpAyETCQdp3B2qC86BbKlAU073bTBfTL9mXg982Auf8WwwFUU=
  - secure: ZOx3Q4osKYQKhz2l55SYGX/5w9TKfOFCJtjn4nf7n2+2Ql9qkcH3/z7+qFKqj4Ya3qnSMK6WFbOhbkhaF/4fTIc/jr9GdePNhChbEiNe/0E+L4PIXDe870sqRGtJtIf2SXh4nf/qInQ0vavGciOVLMkucjfsu9UxggaX+LdSJ6EIHqacAcCifk22X2NaPsjwW/+L5szSQVCIjTzpzG9n/jzIMyC2haC0ozYM3wyQwXWmFb8uERBbtXVk85YZvVYhdoiwf5gj6UnVidwXE7WYmRwoOlU81lQPIof57ecHHXkJGo697h1NPGpzLmF1dF2SigS18bLb/XOp8ca38o1Pw+p3Ng2/ihTOCJByXqqSy22YkSWSj8nZjl1hR3UUDmwq5Unmeje63JlAbQ5GRb/eHcoPI0FfVPPmtLuexUyoo7cS+CS20QKhnCn0csivfszxw9EWMelc0g/uy7MnvnDc1yCZqLxLI1hjzrVcm9Of/d5PPhNy9jifHvpfS5KWftYRm/62ORK2veqCGwibg/K97eVNuBuz3vZ2Ce/S3DHqFCzV0rAJSoiXRt9ThN2mRqgzrCh1NmE/r1PKIxbfa0J09Kjlu+Hico+Xdk3BXAXDc8l750214H9LGKE8WGk3+ZVifmaOhMs+WLoIz5R1/jz8l1GcQcbVOoWdOxmhJG86aog=
install:
- pip install --user awscli
- for i in $(cat .circle-ruby) ; do rvm install $i || exit 1 ; done
- for i in $(cat .circle-ruby) ; do rvm-exec $i bundle install || exit 1 ; done
script:
- for i in $(cat .circle-ruby) ; do rvm-exec $i bundle exec rake || exit 1 ; done
deploy:
  provider: script
  script: aws s3 sync --delete _build/ s3://$BUCKET/
  skip_cleanup: true
  on:
    branch: master
notifications:
  email: false
  slack:
    secure: gGGeXle4Sd9J7oWoluIgj30pbPiK4AJsrh7HpzocE3FKeWpDJU8YiUdh/6qLia1rAoRcmBFA/N6A8hkYqmpbP2/+M7yoFfMfPK0aChyVS5pcqbBpLZM3TwF04yN82FnFzTB85IEjzm8qkDgLgpYyxqtBatd/ti/s4bm5QK1PatANKZ7Pk2zkH1Okoc2H9Zyg7vsm4pXSldkcSd6MrF6KgVq3oSCRW8m3Q0EKN4rnD0MLhKb1D1bu4nMntR0uyUtbX/+l85Xqrlk5zdbHtTwRl3RVIn5Y3QCFolF/CRiZ2Nhh1x9okKSLdLpxqkwccyoEo9lnyAt6C1bPM+VoIlK+rD4h3VZyvNRuH7WXcGPxWI3/uxlxoyS3A53gjUg/uhjf/NWmThPftsRKIPLzvzpV2niHOJzmRHlnya0H2hluwMiKmnDwp+kOxlMHn2vhKiQABGYrwkfb6ZKwshcsfTp9hmKH569GA7njNgRB59kKgZJLSJZJLVRhgEs7zEKIw/+vjSgtrZbZC3huryodT8YJJGfITtW+dZyBa47POVadXUdVFMVeSeclAQxmEp1JO+CxvuJ/OpcUJxep9XQxLNgCz0zemMKIWa5VAQXElU0CECWqyNSq0OcLxt9DDkqL7GLB9I7VRj9tTHPy17kJks8kTfBWJfij0XpKPpsbc9AO5t8=
